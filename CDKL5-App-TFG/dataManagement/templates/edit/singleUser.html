{% extends 'base.html' %}
{% load i18n %}
{% block content %}

<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

<script src="https://code.jquery.com/jquery-3.6.0.slim.js"> </script> 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.min.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.js"></script>
<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
<script>
$( function() {
  $( "#datepicker" ).datepicker({
    dateFormat: "dd/mm/yy",
    orientation: "bottom",
    changeYear: true,
    yearRange: "-40:+0",
  });
} )
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
<script>
$(document).ready(function () {
  $("#erase").click(function () {
    if (!$("#erase").is(":checked")) {
      if (confirm("Eliminará el usuario del sistema. Está seguro de que desea continuar?")) {
        alert("Para hacer el cambio efectivo, seleccione el botón de \n\"guardar cambios\" situado al final.");
      } else ($("#erase").prop('checked', true));
    }
  });
});
</script>

<div class="container">
    {% if messages %}
        {% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onclick="onButtonPress()"></button>
            </div>
        {% endfor %}
    {% endif %}
    <form method="post", enctype="multipart/form-data">
        {% csrf_token %}
        {% for label,form in list %}
        <div class="formPart">
            <h1 class="part-title"><b class="title-text">{{ label }} </b></h1>
            <ul>
                {% for field in form %}
                <li>
                {% if field.label != '' %}
                <div class="field-block"><strong>{{ field.label }}</strong>{{ field }}</div>
                {% if field.label == 'Documento SEPA:' and docPath %}
                <br/>
                <a href="{{ docPath.url }}" download>Descargar el Documento SEPA actual</a>
                {% endif %}
                {% else %}
                    {{ field }}
                {% endif %}
                </li>
            {% endfor %}
            </ul>
        </div>
        {% endfor %}
        <br/>
        <button class="btn btn-light" type="submit" name="UpdateAll">Guardar Cambios</button>
    </form>
    <br/>
    <button class="btn btn-danger" onclick="location.href='/manage/users'" name="GoBack">Salir sin Guardar</button>


</div>

{% endblock content %}